#!/usr/bin/env zsh

# basic configration : {{{

    # use open command open file way{
        alias -s rb=vi
        alias -s erb=vi
        alias -s sh=vi
        alias -s js=vi
        alias -s java=vi
        alias -s txt=vi
    # }

    # ..,...,....,....., ~ and - {
        alias ..="cd .."
        alias ...="cd ../.."
        alias ....="cd ../../.."
        alias .....="cd ../../../.."
        alias ~="cd ~" # `cd` is probably faster to type though
        alias -- -="cd -"


        # Moving around
        alias cdb='cd -'
        alias cls='clear;ls'
    #}

    # popular Directory  {
        alias d="cd ~/Documents/Dropbox"
        alias dl="cd ~/Downloads"
        alias dt="cd ~/Desktop"
        alias j="jobs"
        cloud='/Users/Who/Library/Mobile Documents/com~apple~CloudDocs'
    #}

    # cp,rm, tar etc {
        alias bz2='tar -jcpv -f'
        alias unbz2='tar -jxt -f'
        alias viewbz2='tar -jtv -f'
        alias rm='rm -i'
        alias h='history |tail -n 500'

        alias ze='vi ~/.zshrc'
        alias ve='vi ~/.vimrc'
        alias veb='vi ~/.vimrc.bundles'
    #}

#}}}

#  look/check-out files informations {

    # look {

        # Detect which `ls` flavor is in use
        if ls --color > /dev/null 2>&1; then # GNU `ls`
            colorflag="--color"
        else # macOS `ls`
            colorflag="-G"
        fi

        alias ll="ls -lFh ${colorflag}"
        alias lm="ls -laFh ${colorflag} |more"
        alias la="ls -aFh ${colorflag}"
        alias lsd="ls -lFh ${colorflag} | grep --color=never '^d'"

        # Show human friendly numbers and colors
        alias df='df -h'
        alias du='du -h -d 2'

        # PS
        alias psa="ps aux"
        alias psg="ps aux | grep "
        alias psa="ps aux| ack "

        alias k9="kill -9 "

    #}

    #find information in files {
        alias grep='grep --color=auto'
        alias fgrep='fgrep --color=auto'
        alias egrep='egrep --color=auto'

    #}

#}

# interesting things {

    #play {


        #show top 10 number of command history
        alias show_top10_history="history | awk '{ CMD[\$2]++; count++ } END { for(a in CMD) { print CMD[a] \" \" CMD[a]/count*100 \"% \" a }}' |grep -v './' |column -c3 -s \" \" -t | sort -nr | nl | head -n 10 "

        # Get week number
        alias week='date +%V'

        alias timer='echo "Timer started. Stop with Ctrl-D." && date && time cat && date'

        # Get macOS Software Updates, and update installed Ruby gems, Homebrew, npm, and their installed packages
        alias update='sudo softwareupdate -i -a; brew update; brew upgrade --all; brew cleanup; npm install npm -g; npm update -g; sudo gem update --system; sudo gem update'

        # IP addresses
        alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
        alias localip="ipconfig getifaddr en0"
        alias ips="ifconfig -a | grep -o 'inet6\? \(addr:\)\?\s\?\(\(\([0-9]\+\.\)\{3\}[0-9]\+\)\|[a-fA-F0-9:]\+\)' | awk '{ sub(/inet6? (addr:)? ?/, \"\"); print }'"

        # Recursively delete `.DS_Store` files
        alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"

        # Empty the Trash on all mounted volumes and the main HDD.
        alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl; sqlite3 ~/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV* 'delete from LSQuarantineEvent'"
    #}

    # Apple System {

        # Trim new lines and copy to clipboard
        alias c="tr -d '\n' | pbcopy"

        # Show/hide hidden files in Finder
        alias show="defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder"
        alias hide="defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder"

        # Hide/show all desktop icons (useful when presenting)
        alias hidedesktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
        alias showdesktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"

    #}


    # Stopwatch {

        # Flush Directory Service cache
        alias flush="dscacheutil -flushcache && killall -HUP mDNSResponder"

        # Clean up LaunchServices to remove duplicates in the “Open With” menu
        alias lscleanup="/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain local -domain system -domain user && killall Finder"

        # View HTTP traffic
        alias sniff="sudo ngrep -d 'en1' -t '^(GET|POST) ' 'tcp and port 80'"
        alias httpdump="sudo tcpdump -i en1 -n -s 0 -w - | grep -a -o -E \"Host\: .*|GET \/.*\""

        # Canonical hex dump; some systems have this symlinked
        command -v hd > /dev/null || alias hd="hexdump -C"

        # macOS has no `md5sum`, so use `md5` as a fallback
        command -v md5sum > /dev/null || alias md5sum="md5"

        # macOS has no `sha1sum`, so use `shasum` as a fallback
        command -v sha1sum > /dev/null || alias sha1sum="shasum"

    #}
#}
